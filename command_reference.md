# Slackボットコマンドリファレンス

## PL向けコマンド

### キャラクタの初期化

- [キャラクタ保管庫のクトゥルフPC](https://charasheet.vampire-blood.net/coc_pc_making.html)を使うために登録する
- 以降、PCとして、このキャラクタを使ったコマンドが実行できるようになる

```slack
/cc init https://charasheet.vampire-blood.net/${YOUR_CHARACTER_ID}
```

### ステータス表示

- PCのHP、MP、SAN値などを表示

```slack
/cc s
or
/cc status
```

### キャラクタ保管庫での変更を取り込む

- キャラクタ保管庫での変更を適用
  - ただし、能力値の一時的増減分は反映されない
- 変更を取り込んだ後、 `/cc s` と同様のステータス表示

```slack
/cc u
or
/cc update
```

### ステータスの更新

- HP、MP、SAN値の更新
- HP、MP、SANなどの大文字小文字は区別しない
  - 例: HPは `HP` でも `hp` でも良い
- ステータス更新後、 `/cc s` と同様のステータス表示

```slack
/cc u [HP or MP or SAN](+|-)[数値]
or
/cc update [HP or MP or SAN](+|-)[数値]
```

####　例

- HPを2減少
  - `/cc u hp-2`
- SAN値を1回復
  - `/cc u SAN+1`

### SANチェック

```slack
/cc sanc
/cc sanc ${チェック成功時の現象SAN}/${チェック失敗時の現象SAN}
```

### 能力値判定ロール

- 指定した能力値で判定ロール
- 能力値の補正値(プラス20、マイナス10、2倍、半分など)
- 能力値の指定について補足
  - オリジナルの能力値も指定できる
  - 芸術、母国語などは全角カッコで指定する
    - 例: `芸術（音楽）` , `母国語（日本語）`
- ロール結果と成否が返される
  - 成否は色で表現される
    - 成功: 緑 #00FF00 (クリティカルは黄#FFFF00)
    - 失敗: 赤 #FF0000 (ファンブルは黒#000000)

```slack
/cc [能力名](+|-|*|/)[数値]
```

#### 例

- 目星(技能値60の場合)
  - `/cc 目星`
    - 出目20で成功: `成功 【目星】 20/60 (60+0)`
    - 出目65で失敗: `失敗 【目星】 65/60 (60+0)`
- 目星の半分(技能値60の場合)
  - `/cc 目星/2`
    - 出目20で成功: `成功 【目星】 20/30 (60/2)`
    - 出目40で失敗: `失敗 【目星】 40/30 (60/2)`
- 母国語（日本語）プラス20(技能値45の場合)
  - `/cc 母国語（日本語）+20`
    - 出目40で成功: `成功 【母国語（日本語）】 40/65 (45+20)`
    - 出目95で失敗: `失敗 【母国語（日本語）】 95/65 (45+20)`
- STR*5(能力値12の場合)
  - `/cc STR*5`
    - 出目20で成功: `成功 【目星】 20/60 (12*5)`
    - 出目80で失敗: `失敗 【目星】 80/60 (12*5)`

### シークレットダイスロール

- ダイスロールし結果をDMでKPに送信
- ダイスロールしたことはチャンネルに通知されるが、何をロールしたかや結果はKPにのみ通知される
- `/cc join [キーパID]` で特定KPのセッションに参加していることが前提

```slack
/cc hide ${SKILL}(${OPERANT}${VALUE}
```

### 1D100のダイスロール

```slack
/cc roll
```

### 立ち絵画像保存

- 現在設定中のキャラとslackに設定中の画像を紐付け、ストレージに保存
- 次回以降、画像をロードするとslackのチャンネルに画像がポストされる

#### 立ち絵を保存

``` slack
/cc saveimg
```

#### 立ち絵をロード

``` slack
/cc loadimg
```

### ダイスロール

- 任意の種類、個数を組み合わせたダイスロール
- 各ダイスの出目と合計値を返す

```slack
/cc ${ダイス個数}d|D${ダイスの面数}( +|-....)
```

#### 例

- 2D6: `/cc 2d6`
- 2D10+1D4: `/cc 2D10+1d4`
- 2D10+1D4-1D3: `/cc 2D10+1D4-1D3`

### キャラクタの一覧取得

- 過去に設定済みのキャラクタの一覧を取得
- コマンドに条件式をいれる事で条件にマッチするキャラクタのみ出力される
- 出力されたリストはリンクなのでクリックする事でオリジナルのキャラクタシートに遷移可

``` slack
/cc list chara
/cc list chara (${能力値|技能値} {>|<} {数値}
```

#### 例
- /cc list chara: `全件取得`
- /cc list chara 跳躍: `全件取得＋跳躍の値が高い順に表示`
- /cc list chara DEX>15: `DEXの値が15より多いキャラを表示`
- /cc list chara 図書館<50: `図書館の値が50より少ないキャラを表示`

## KP向けコマンド

### セッション(キーパリング)の開始

```Slack
/cc kp start
```

- セッションを開始し、PLにJOINしてもらうことでいくつかのコマンドを実行できるようにするための準備
- レスポンスとして `/cc join [キーパID]` というテキストが返ってくる
- セッションに参加するPLにこのコマンドを打ち込んでもらう

### 能力値順の表示

- 参加しているPCの能力値順表示

```slack
/cc kp order [能力値]
```

#### 例

- DEX順の表示: `/cc kp order DEX`
  - 以下のようなレスポンスが返される

  ```slack
  DEX順
  1. [ユーザA] (12)
  2. [ユーザB] (8)
  3. [ユーザC] (7)
  ```

### お遊びコマンド

- お祈り: `/cc pray`
  - `/cc 1d100` と同じ

### デバッグコマンド

- 全パラメータを表示: `/cc get`
- 内部向けパラメータを表示: `/cc getstate`
  - 以下の情報を表示
    - キャラクタ保管庫上のPCのURL
    - PCのID(URLの一部にも使用される)
    - KPのSlackのユーザID
    - SANの増減値
